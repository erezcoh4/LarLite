/**
 * \file AnaPandoraNuTracks.h
 *
 * \ingroup MyPackage
 *
 * \brief Class def header for a class AnaPandoraNuTracks
 *
 * @author erezcohen
 */

/** \addtogroup MyPackage
 
 @{*/

#ifndef LARLITE_ANAPANDORANUTRACKS_H
#define LARLITE_ANAPANDORANUTRACKS_H

#include "Analysis/ana_base.h"
#include "MySoftwarePackage/TPlots.h"
using namespace std;

namespace larlite {
    /**
     \class AnaPandoraNuTracks
     User custom analysis class made by SHELL_USER_NAME
     */
    class AnaPandoraNuTracks : public ana_base{
        
    public:
        
        AnaPandoraNuTracks(){ _name="AnaPandoraNuTracks"; _fout=0;}
        virtual ~AnaPandoraNuTracks(){}
        
        
        virtual bool initialize();
        
        
        virtual bool analyze(storage_manager* storage);
        
        
        virtual bool finalize();
      
        
        bool LoadBDTCandidates(bool DoPrint = false);
        
        
        int     run , subrun ,  event ,  start_wire , end_wire;
        float   start_t , end_t;
        
        
    protected:
        
       
        // BDT candidates map: < run , map < subrun , map < event , pair < vecor (start-wire,end-wire) , vector(start-time, end-time) >
        std::vector<int>    wire_start_end;
        std::vector<float>  time_start_end;

        
        //    run         subrun      event         s/e wire    s/e time
        map < int , map < int , map < int , pair < vector<int>,vector<float> > > > > BDTcandidatesMap;
        
        pair< vector<int>,vector<float> > box;
        map < int , pair < vector<int>,vector<float> > > evt_box;
        map < int , map < int , pair < vector<int>,vector<float> > > > sub_evt_box;
        map < int , map < int , map < int , pair < vector<int>,vector<float> > > > > run_sub_evt_box;
        
        
        
        // tracks
        TTree             * TracksTree;
        Double_t          straight_track_length , segmented_track_length;
        
        TVector3          vertex , end , straight_track ;
        

        
    };
}
#endif

//**************************************************************************
//
// For Analysis framework documentation, read Manual.pdf here:
//
// http://microboone-docdb.fnal.gov:8080/cgi-bin/ShowDocument?docid=3183
//
//**************************************************************************

/** @} */ // end of doxygen group 
